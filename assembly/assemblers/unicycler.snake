rule unicycler:
    input:
        r1 = 'reads/{read_type}/{sample}_R1.fastq.gz',
        r2 = 'reads/{read_type}/{sample}_R2.fastq.gz',
    params:
        outdir = 'unicycler/{sample}_{read_type}'
    output:
        contigs = 'unicycler/{sample}_{read_type}/contigs.fasta'
    threads:
        int(config['threads'])
    shell:
        '''
        mkdir -p {params.outdir}

        unicycler \
            -1 {input.r1} \
            -2 {input.r2} \
            -o {params.outdir} \
            -t {threads} \
            --spades_path /usr/local/bin/spades

        mv {params.outdir}/assembly.fasta {params.outdir}/contigs.fasta
        '''